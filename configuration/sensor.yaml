# PostNL
  - platform: postnl
    name: PostNL Jimmy
    username: !secret postnl_user
    password: !secret postnl_pass

  - platform: postnl
    name: PostNL Stephanie
    username: !secret postnl_user_2
    password: !secret postnl_pass_2

# Time and Date
  - platform: time_date
    display_options:
      - time
      - date
      - date_time
      - date_time_iso
      - time_date
      - time_utc
      - beat

  - platform: moon

  - platform: season
    type: astronomical

# Sonarr / Radarr
  - platform: sonarr
    host: 192.168.0.31
    api_key: !secret sonarr_api_key
    monitored_conditions:
      - wanted
      - upcoming
      - series
      - queue
      - diskspace
    days: 7

  - platform: sonarr_upcoming_media
    api_key: !secret sonarr_api_key
    host: 192.168.0.31
    port: 8989
    days: 7
    max: 10

  - platform: radarr
    api_key: !secret radarr_api_key
    host: 192.168.0.31
    port: 7878
    monitored_conditions:
      - movies
      - upcoming   
      - status
      - commands
      - diskspace
    days: 90 

  - platform: radarr_upcoming_media
    api_key: !secret radarr_api_key
    host: 192.168.0.31
    port: 7878
    days: 120
    max: 10

# Waze Travel Time
  - platform: waze_travel_time
    name: Reistijd Jimmy
    origin: person.jimmy
    destination: zone.home
    region: EU

  - platform: waze_travel_time
    name: Reistijd Jimmy Work
    origin: person.jimmy
    destination: zone.vtc_best
    region: EU

  - platform: waze_travel_time
    name: Reistijd Stephanie
    origin: person.stephanie
    destination: zone.home
    region: EU

  - platform: waze_travel_time
    name: Reistijd Stephanie Work
    origin: person.stephanie
    destination: zone.ah_eindhoven
    region: EU

  - platform: waze_travel_time
    name: Reistijd jimsteph
    origin: person.stephanie
    destination: person.jimmy
    region: EU

# Template Sensors
  - platform: template
    sensors:
  # Motion Sensor Temperature Sensors
      motion_toilet_temperature:
        value_template: '{{ states.binary_sensor.motion_toilet.attributes.temperature }}'
        unit_of_measurement: '°C'
        friendly_name: Toilet Temperatuur
      motion_bijkeuken_temperature:
        value_template: '{{ states.binary_sensor.motion_bijkeuken.attributes.temperature }}'
        unit_of_measurement: '°C'
        friendly_name: Bijkeuken Temperatuur
      voordeur_temperature:
        value_template: '{{ states.binary_sensor.voordeur.attributes.temperature }}'
        unit_of_measurement: '°C'
        friendly_name: Hal Temperatuur
  # Washingmachine/droger/vaatwasser Template Sensors
      wasmachine_status:
        value_template: '{{ states.input_select.wasmachine_status.state}}'
        friendly_name: 'Wasmachine Status'
      vaatwasser_status:
        value_template: '{{ states.input_select.vaatwasser_status.state}}'
        friendly_name: 'Vaatwasser Status'
      droger_status:
        value_template: '{{ states.input_select.droger_status.state}}'
        friendly_name: 'Droger Status'
  # Vacuum Template Sensors
      vacuum_battery:
        value_template: '{{ states.vacuum.xiaomi_vacuum_cleaner.attributes.battery_level }}'
        friendly_name: 'Roborock Battery Level'
        device_class: 'battery'
        unit_of_measurement: '%'
        icon_template: >-
          {% set battery_level = states('sensor.vacuum_battery')|int('unknown') %}
          {% set battery_round = (battery_level|int / 10)|int * 10 %}
          {% if battery_level == 'unknown' %}
            mdi:battery-unknown
          {% else %}
            {% if battery_round >= 100 %}
              mdi:battery
            {% elif battery_round > 0 %}
              mdi:battery-{{ battery_round }}
            {% else %}
              mdi:battery-alert
            {% endif %}
          {% endif %}
      vacuum_total_cleaned_area:
        value_template: '{{ states.vacuum.xiaomi_vacuum_cleaner.attributes.total_cleaned_area }}'
        friendly_name: 'Roborock Total Cleaned Area'
      vacuum_cleaning_count:
        value_template: '{{ states.vacuum.xiaomi_vacuum_cleaner.attributes.cleaning_count }}'
        friendly_name: 'Roborock Cleaning Count'
      vacuum_total_cleaning_time:
        value_template: '{{ states.vacuum.xiaomi_vacuum_cleaner.attributes.total_cleaning_time }}'
        friendly_name: 'Roborock Total Cleaning Time'
      vacuum_main_brush_left:
        value_template: '{{ states.vacuum.xiaomi_vacuum_cleaner.attributes.main_brush_left }}'
        friendly_name: 'Roborock Main Brush Left'
      vacuum_side_brush_left:
        value_template: '{{ states.vacuum.xiaomi_vacuum_cleaner.attributes.side_brush_left }}'
        friendly_name: 'Roborock Side Brush Left'
      vacuum_filter_left:
        value_template: '{{ states.vacuum.xiaomi_vacuum_cleaner.attributes.filter_left }}'
        friendly_name: 'Roborock Filter Left'
      vacuum_sensor_dirty_left:
        value_template: '{{ states.vacuum.xiaomi_vacuum_cleaner.attributes.sensor_dirty_left }}'
        friendly_name: 'Roborock Sensor Dirty Left'
      vacuum_cleaner_error_sensor:
        friendly_name: Vacuum Cleaner Error Sensor
        value_template: >-
          {% if states.vacuum.xiaomi_vacuum_cleaner.attributes.error is defined %}
            {{states.vacuum.xiaomi_vacuum_cleaner.attributes.error}}
          {% else %}
            No Error
          {% endif %}
      vacuum_cleaner_status_sensor:
        friendly_name: Vacuum Cleaner Status Sensor
        value_template: >-
          {{ states.vacuum.xiaomi_vacuum_cleaner.attributes.status }}
  # PostNL Template Sensors
      postnl_jimmy_packages:
        value_template: >-
          {{ states.sensor.postnl_jimmy_delivery.state }}
      postnl_stephanie_packages:
        value_template: >-
          {{ states.sensor.postnl_stephanie_delivery.state }}

# Weather Sensors
  - platform: darksky
    api_key: !secret darksky
    forecast:
      - 0
      - 1
      - 2
      - 3
      - 4
      - 5
    monitored_conditions:
      - summary
      - temperature
      - humidity
      - pressure
      - apparent_temperature
      - precip_probability
      - icon
      - precip_intensity
      - precip_accumulation
      - dew_point
      - wind_speed
      - wind_gust
      - wind_bearing
      - cloud_cover
      - visibility
      - hourly_summary
      - daily_summary
      - temperature_high
      - temperature_low
      - apparent_temperature_high
      - apparent_temperature_low
      - moon_phase
      - sunrise_time
      - sunset_time
      - ozone
      - precip_type
    language: nl

# RDW Sensor (For Dutch users only!)
  - platform: rdw
    name: "Peugeot 207"
    plate: 21XXDL
    sensors:
      - expdate
      - insured
  - platform: rdw
    name: "Citroen C1"
    plate: 55GFF3
    sensors:
      - expdate
      - insured

# Imap Sensor (Please get the imap.py from my repo if you use outlook/hotmail)
  - platform: imap
    server: imap-mail.outlook.com
    username: !secret jimzmail
    password: !secret jimzpwd
    port: 993

  - platform: imap
    server: imap-mail.outlook.com
    username: !secret stephmail
    password: !secret stephpwd
    port: 993

# System Monitor (Scan HA resource usage)
  - platform: systemmonitor
    resources:
      - type: disk_use_percent
        arg: /home
      - type: memory_free
      - type: memory_use
      - type: memory_use_percent

# United Consumers Gas Prices (Dutch Users Only!)
  - platform: scrape
    name: Euro95 Advies
    resource: "https://www.unitedconsumers.com/brandstofprijzen"
    select: ".table div:nth-of-type(2) div:nth-of-type(3)"
    value_template: "{{ value |replace('€', '') |replace(',', '.') |round(3) }}"
    scan_interval: 3600 # be nice; once per hour only

# Certificate Expiry Sensor
  - platform: cert_expiry
    host: !secret certificate_url

# Changed/Added in 0.13.0 EVERYTHING BELOW ###############################################################################################

# Printer
  - platform: snmp
    name: 'Printer Pages'
    host: 192.168.0.3
    baseoid: 1.3.6.1.2.1.43.10.2.1.4.1.1
    accept_errors: true
    scan_interval: 3600

  - platform: snmp
    name: 'Printer Ink - Black'
    host: 192.168.0.3
    baseoid: 1.3.6.1.2.1.43.11.1.1.9.1.1
    accept_errors: true
    scan_interval: 86400
    unit_of_measurement: '%'

  - platform: snmp
    name: 'Printer Ink - Color'
    host: 192.168.0.3
    baseoid: 1.3.6.1.2.1.43.11.1.1.9.1.2
    accept_errors: true
    scan_interval: 86400
    unit_of_measurement: '%'

# Afvalbeheer (Cure)
  - platform: afvalbeheer
    wastecollector: Cure
    resources:
      - restafval
      - gft
      - papier
      - pmd
    postcode: !secret postcode
    streetnumber: 70
    upcomingsensor: 1
    dateformat: '%d %b'

# Air Visual
  - platform: airvisual
    api_key: !secret airvisual_api
    monitored_conditions:
      - us
    show_on_map: false
    scan_interval: 300
    latitude: !secret latitude
    longitude: !secret longitude


# Note: Why don't I just use a shorter code for this? Simple because I don't want to include all entities in this list.
# If there is a shorter/better way please open an issue on my github repo.

# Template All Lights
  - platform: template
    sensors:
      current_lights_on:
        friendly_name: All Lights Currently On
        unit_of_measurement: 'On'
        value_template: >
          {% set total = 0 %}

          {% if is_state('light.plafond', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.eettafel', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.tafellamp', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.vloerlamp', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.woonkamer_led_lampen', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.gateway_light_7811dcdef324', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.nachtkastje_stephanie', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.nachtkastje_jimmy', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.slaapkamer_led_lampen', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.officeled', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.kleine_kamer', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.keuken', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.keukenspots', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.bijkeuken', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.entree_lamp', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.gang_lamp', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('switch.koogeek_sw_056ce9', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.toiletlamp', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.berging', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.balkonlamp', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.slaapkamer_kast', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('light.slaapkamer_bed', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {{total}}

# Template All Devices
  - platform: template
    sensors:
      current_devices_on:
        friendly_name: All Devices Currently On
        unit_of_measurement: 'On'
        value_template: >
          {% set total = 0 %}

          {% if is_state('switch.ventilator', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('switch.receiver', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('switch.samsung_tv', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('switch.receiver_slaapkamer', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('switch.tv_slaapkamer', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('switch.pc_van_stephanie', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('switch.pc_van_jimmy', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('switch.printer', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('switch.xbox_one', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('switch.waterkoker', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('switch.afzuigkap', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('switch.cappumaker', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('switch.vaatwasser', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('switch.air_fryer', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('switch.wasmachine', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('switch.droger', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('switch.oven', 'on') %}
            {% set total = total + 1 %}
          {% endif %}

          {{total}}

# Template All Sensors
  - platform: template
    sensors:
      current_sensors_on:
        friendly_name: All Sensors Currently On
        unit_of_measurement: 'On'
        value_template: >
          {% set total = 0 %}

          {% if is_state('binary_sensor.voordeur', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('binary_sensor.woonkamer_deur', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('binary_sensor.slaapkamer_deur', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('binary_sensor.motion_bijkeuken', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('binary_sensor.motion_toilet', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('binary_sensor.tradfri_motion_sensor', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('binary_sensor.dafang_motion_sensor', 'on') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('binary_sensor.fire_30', 'on') %}
            {% set total = total + 1 %}
          {% endif %}

          {{total}}

# Template All Radiator Valves
  - platform: template
    sensors:
      current_radiator_valves_on:
        friendly_name: All Radiator Valves Currently On
        unit_of_measurement: 'On'
        value_template: >
          {% set total = 0 %}

          {% if is_state('climate.tado_smart_radiator_thermostat_va1671957504', 'heat') %}
            {% set total = total + 1 %}
          {% endif %}
          {% if is_state('climate.tado_smart_radiator_thermostat_va2898201344', 'heat') %}
            {% set total = total + 1 %}
          {% endif %}

          {{total}}

  - platform: rest
    resource: http://192.168.0.11/api/map/latest
    name: xiaomi_map
    json_attributes:
      - image
      - path
      - charger
      - robot
    value_template: 'OK'
    scan_interval: 5

  - platform: nzbget
    host: !secret url_5
    port: 9090
    ssl: true
    username: !secret nzbget_usr
    password: !secret nzbget_pwd
    monitored_variables:
      - article_cache
      - download_rate
      - download_paused
      - average_download_rate
      - download_size
      - free_disk_space
      - post_paused
      - remaining_size
      - uptime

  - platform: qbittorrent
    url: !secret qbittorrent_url
    username: !secret qbit_usr
    password: !secret qbit_pwd